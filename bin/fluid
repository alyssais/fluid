#!/usr/bin/env node

var program = require("commander");
var fs = require("fs");
require("colors");
var package = require(fs.realpathSync(__dirname + "/../package.json"));

var app = function() {
	try {
		return require(fs.realpathSync("./config/application"));
	} catch (e) {
		console.log("\n  Error: This is not a Fluid application.\n".red);
		process.exit(0);
	}
};

program
	.version(package.version);

program
	.command('server [port]')
	.description('run application on localhost')
	.action(function(env) {
		app();
		Fluid.application.server();
	});

program.parse(process.argv);
